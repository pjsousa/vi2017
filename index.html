<!DOCTYPE html>
<head>
	<!-- Include bootstrap, handsontable e d3 -->
	
	<script src="libs/jquery-3.2.1.min.js" charset="utf-8"></script>
	<script src="libs/bootstrap/js/bootstrap.min.js" charset="utf-8"></script>
	<script src="libs/lodash.min.js" charset="utf-8"></script>
	<script src="libs/handsontable.full.min.js" charset="utf-8"></script>
	<script src="libs/d3.v4.min.js" charset="utf-8"></script>
	<script src="libs/bootstrap-select.min.js" type="text/javascript"></script>


	<link rel="stylesheet" type="text/css" href="libs/bootstrap/css/bootstrap.min.css" />
	<link rel="stylesheet" type="text/css" href="libs/handsontable.full.min.css" />
	<link rel="stylesheet" type="text/css" href="libs/bootstrap-select.min.css" />
	<link rel="stylesheet" type="text/css" href="style.css" />
</head>
<meta charset="utf-8">
<body>
	<div class="container-fluid">
		<div class="page-toolbar row">
			<div class="col-xs-8 col-xs-offset-2">
				<div class="panel" style="margin:0">
					<div class="panel-body text-center">
						<div class="col-xs-6 col-xs-offset-3">
							<div class="input-group">
								<div class="input-group-addon"> <span class="glyphicon glyphicon-search"></span> </div>
								<input type="text" class="form-control input-sm" id="exampleInputAmount" placeholder="Look for a game name">
							</div>
						</div>
							
					</div>
				</div>
			</div>
		</div>
		<!-- ./page-toolbar row -->
		<div class="row page-content">
			<div class="top-viz">
				<div class="left-panel col-xs-7">
					<div id="t1Panel" class="panel panel-default panel-viz">
						<div class="panel-heading">
							<span>Sales evolution over time</span>
							<div class="pull-right">
								<div id = "div-info-line">
									<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown"  id="button-info-line" >
										<span class="glyphicon glyphicon-info-sign"></span>
									</button>
								</div>
							</div>
						</div>
						<div class="col-xs-12 text-center">
							<a class="btn btn-link btn-xs"> <span class="glyphicon glyphicon-filter"></span> </a>

							<select id="t1Atts" class="t1Atts selectpicker show-menu-arrow" >
								<option data-tokens="Genre">Genre</option>
							</select>
							<select id="t1Values" class="t1Values selectpicker show-menu-arrow" data-live-search="true" data-size="8">
							</select>
						</div>
						<div id="t1Viz" class="panel-body">
							<img class="img-responsive" src="images/t1.png" />
							<svg></svg>
							<div class="t1Legend"></div>
						</div>
					</div>
					<!-- ./t1Panel -->
				</div>
				<!-- ./top-viz > left-panel col-xs-7 -->
				<div class="right-panel col-xs-5">
					<div id="t5Panel" class="panel panel-default panel-viz">
						<div class="panel-heading">
							<span>Games Sales/Scores correlation</span>
						</div>
						<div id="t5Viz" class="panel-body">
							<img class="img-responsive" src="images/t5.png" />
							<svg></svg>
						</div>
					</div>
					<!-- ./t5Panel -->
				</div>
				<!-- ./top-viz > right-panel col-xs-5 -->
			</div>
			<!-- ./top-viz -->
			<div class="middle-viz">
				<div class="left-panel col-xs-4">
					<div id="t2Panel" class="panel panel-default panel-viz">
						<div class="panel-heading">
							<small>
								Best Sellers for [...]
							</small>
						</div>
						<div id="t2Viz" class="panel-body">
							<div class="col-xs-12 text-center">
								<a id="synct2" class="btn btn-default btn-xs"> 
									<span class="glyphicon glyphicon-filter"></span>
									<span class="glyphicon glyphicon-transfer"></span>
								</a>

								<select id="t2Atts" class="t2Atts selectpicker show-menu-arrow" >
								  <option data-tokens="Platform">Platform</option>
								  <option data-tokens="Genre">Genre</option>
								  <option data-tokens="Publisher">Publisher</option>
								  <option data-tokens="Developer">Developer</option>
								</select>

								
								<select id="t2Values" class="t2Values selectpicker show-menu-arrow" data-live-search="true" data-size="8">
								</select>

								<a id="cleart2" class="btn btn-default btn-xs" style="visibility: hidden; pointer-events: none;"> <span class="glyphicon glyphicon-remove"></span> </a>
							</div>
							<img class="img-responsive" src="images/t2.png" />
							<svg></svg>
						</div>
					</div>
					<!-- ./t2Panel -->
				</div>
				<!-- ./middle-viz > left-panel col-xs-7 -->
				<div class="right-panel col-xs-5">
					<div id="clvPanel" class="panel panel-default panel-viz">
						<div class="panel-heading">
							Games
							<div class="pull-right">
									<div class="btn-group">
											<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
													<span class="glyphicon glyphicon-sort"></span>
											</button>
											<ul class="dropdown-menu pull-right" role="menu">
													<li><a href="#" onclick="sortCleveland('sales'); event.preventDefault();">Global Sales</a>
													</li>
													<li><a href="#" onclick="sortCleveland('name'); event.preventDefault();">Name</a>
													</li>
											</ul>
									</div>
							</div>
							&nbsp;
						</div>
						<div id="clvViz" class="panel-body">
							<img class="img-responsive" src="images/clv.png" />
							<svg></svg>
						</div>
					</div>
					<!-- ./clvPanel -->
				</div>
				<div class="right-panel col-xs-3">
					<div id="dtlPanel" class="panel panel-default panel-viz" style="overflow-y: hidden;">
						<div class="panel-heading">
								<div class="row">
									<h5 id="name" style="margin-top:0; text-align: center; white-space: nowrap; overflow-x: auto;">Name</h5>
									<h5 style="margin-bottom:0; text-align: center;">
										<span id="platform">Platform</span> - <span id="year_of_release">year_of_release</span>
									</h5>
								</div>
								<div class="row" style="margin: 5px 0">
									<div class="col-xs-6" style="text-align: center;">
											<p style="margin: 5px 0 0;"><small>Score ( / 100 )</small></p><h5 id="mean_usercritic_score" style="margin: 0 5px;">mean_usercritic_score</h5>
									</div>
									<div class="col-xs-6" style="text-align: center;">
											<p style="margin: 5px 0 0;"><small>Global Sales ( Units )</small></p><h5 id="global_sales" style="margin: 0 5px;">global_sales</h5>
									</div>
								</div>
								
								<small><strong>Rating </strong></small><small id="rating">Rating</small>
						</div>
						<div id="dtlViz" class="panel-body">
							<div class="row">
								<div id="sales" class="col-xs-12" style="margin-bottom: 10px;">
									<h5 style="text-align: left; margin: 0 0 5px 0;">Sales by region (Million Units)</h5>
									<svg id="salesViz"></svg>
									<div id="salesLegend" class="row">
									</div>
								</div>
							</div>
							<div class="row">
								<div class="lead text-center" style="font-size: 1em; min-height: 3em;">
									<span id="genre">Action</span> game from <span id="publisher">Publisher</span> developed by <span id="developer">Developer</span>.
								</div>
							</div>
							<div class="row">
								<div class="col-xs-8 scoresVizParent">
									<svg id="scoresViz"></svg>
								</div>
								<div class="col-xs-4" style="padding: 0;">
									<div class="row">
										<div class="col-xs-12" style="text-align: center;">
												<p style="margin: 5px 0 0; font-size: 0.7em;"><small>User|Critic Diff.</small></p><h5 id="usercritic_diff" style="font-size:0.65em; ;margin: 0 5px;">mean_usercritic_score</h5>
										</div>
										<div class="col-xs-12" style="text-align: center;">
												<p style="margin: 5px 0 0; font-size: 0.7em;"><small>User Count</small></p><h5 id="user_count" style="font-size:0.65em; ;margin: 0 5px;">mean_usercritic_score</h5>
										</div>
										<div class="col-xs-12" style="text-align: center;">
												<p style="margin: 5px 0 0; font-size: 0.7em;"><small>Critic Count</small></p><h5 id="critc_count" style="font-size:0.65em; ;margin: 0 5px;">global_sales</h5>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<!-- ./dtlPanel -->
				</div>
				<!-- ./middle-viz > right-panel col-xs-5 -->
			</div>
			<!-- ./middle-viz -->
			<div class="bottom-viz">
				<div class="left-panel col-xs-6">
					<div id="t6Panel" class="panel panel-default panel-viz">
						<div class="panel-heading">
							<span>Most Praised</span>
							<div class="pull-right">
								<div id = "div-info-heatmap">
									<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown"  id="button-info-heatmap" >
										<span class="glyphicon glyphicon-info-sign"></span>
									</button>
								</div>
							</div>
						</div>
						<div id="t6Viz" class="panel-body">
							<div class="col-xs-12 text-center" id="t6-buttons-div">
								<a class="btn btn-link btn-xs"> <span class="glyphicon glyphicon-filter"></span> </a>

							  <select id="t6Atts" class="t6Atts selectpicker show-menu-arrow" >
							      <option data-tokens="Platform">Platform</option>
							      <option data-tokens="Genre">Genre</option>
							      <option data-tokens="Publisher">Publisher</option>
							      <option data-tokens="Developer">Developer</option>
							  </select>

							  <select id="t6Values" class="t6Values selectpicker show-menu-arrow" data-live-search="true" data-size="8">
							  </select>
							</div>
							<img class="img-responsive" src="images/t6.png" />
              <svg></svg>
						</div>
					</div>
					<!-- ./t6Panel -->
				</div>
				<div class="right-panel col-xs-6">
					<div id="t4Panel" class="panel panel-default panel-viz">
						<div class="panel-heading">
							<span>% Releases by rating</span>
						</div>
						<div id="t4Viz" class="panel-body">
							<img class="img-responsive" src="images/t4.png" />
						</div>
					</div>
					<!-- ./t4Panel -->
				</div>
			</div>
			<!-- ./bottom-viz -->
		</div>
		<!-- ./page-content -->
	</div>

    <div id="myModal" class="modal">

      <!-- Modal content -->
      <div class="modal-content">
        <span class="close">&times;</span>
        <p id="info-text">Some text in the Modal..</p>
      </div>

    </div>
    
	<!-- Os "includes" das nossas sources -->
	<script src="javascript/app.js" ></script>
	<script src="javascript/datahandler.js" ></script>
	<script src="javascript/sliceutils.js" ></script>
	<script src="javascript/vizutils.js" ></script>
	<script src="javascript/dropdownutil.js" ></script>
 
	<script src="javascript/t1.js" ></script>
	<script src="javascript/t2.js" ></script>
	<script src="javascript/t3.js" ></script>
	<script src="javascript/t4.js" ></script>
	<script src="javascript/t5.js" ></script>
	<script src="javascript/t6.js" ></script>
	<script src="javascript/cleveland.js" ></script>
	<script src="javascript/detail.js" ></script>
	<script>
		$(document).ready(function(){
			// esta função vai disparar quando todo o HTML tiver carregado e quando todas as 
			// sources files estiverem do nosso lado.

			$('.t2Atts').selectpicker({
				style: 'btn-link btn-xs',
			  header: "Select a data attribute",
			  width: "100px"
			});

			$('.t2Values').selectpicker({
			  style: 'btn-link btn-xs',
			  header: "Select a value to filter your data",
			  title:"Choose one of the following...",
			  width: "100px"
			});

			$("#synct2").on("click", syncdropdownt2_click);
			$("#cleart2").on("click", cleardropdownt2_click);
			
            $('.t1Atts').selectpicker({
				style: 'btn-link btn-xs',
			  width: "100px"
			});

			$('.t1Values').selectpicker({
			  style: 'btn-link btn-xs',
			  header: "Select a value to filter your data",
			  title:"Choose one of the following...",
			  width: "100px"
			});
            
            			
            $('.t6Atts').selectpicker({
				style: 'btn-link btn-xs',
			  width: "100px"
			});

			$('.t6Values').selectpicker({
			  style: 'btn-link btn-xs',
			  header: "Select a value to filter your data",
			  title:"Choose one of the following...",
			  width: "100px"
			});
            
            
            
			// step 1. fetch data
			main();
			// step 2. the world!
			// 

		})

		$(window).resize(function(){
			setVizSizes();
			data_ready();
		})
	</script>
</body>
